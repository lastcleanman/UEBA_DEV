# UEBA_DEV GitHub 프로젝트 종합 리뷰

## 1) 총평
- 전체 구조는 **Frontend(React) + Backend(FastAPI) + Spark Pipeline + ELK + Postgres**로 분리되어 있어 확장성과 역할 분리가 잘 되어 있습니다.
- 특히 `PluginManager` 기반 탐지 플러그인 로딩 구조는 라이선스 등급별 기능 제어에 유리하며, 운영 단계 확장성이 좋습니다.
- 다만 운영 관점에서는 **인증/권한, 비밀정보 관리, API 일관성, 장애 복원성**이 아직 PoC 수준에 가까워, 운영 배포 전 보완이 필요합니다.

## 2) 아키텍처 관찰 포인트

### 강점
1. **파이프라인 단계 분리 명확**
   - Input → Process → Detect → Output 흐름이 코드상 명확합니다.
2. **플러그인 기반 확장성 확보**
   - `pipeline` 설정과 라이선스 티어를 조합해 탐지 로직을 동적으로 제한/확장합니다.
3. **대시보드 API 분리**
   - `/analytics`와 `/system` 라우터가 분리되어 UI 확장 시 유지보수성이 높습니다.

### 보완 필요
1. **인증/인가 체계 부재**
   - 관리자 기능이 프론트 단 비밀번호 비교 방식이라 우회가 쉽습니다.
2. **환경/시크릿 분리 미흡**
   - Docker Compose에 민감정보가 직접 포함되어 있습니다.
3. **운영 내구성 미흡**
   - 파이프라인 상태가 메모리에만 있어 프로세스 재시작 시 상태 유실 위험이 있습니다.

## 3) 주요 리스크(우선순위)

### P0 (즉시 대응 권장)
1. **프론트엔드 하드코딩 관리자 비밀번호**
   - `admin123`이 클라이언트 코드에 존재하여 누구나 확인 가능합니다.
2. **민감정보 노출 가능성**
   - Compose 파일에 Postgres 계정/패스워드가 평문으로 포함되어 있습니다.
3. **과도하게 열린 CORS 정책**
   - `allow_origins=["*"]` + credential 허용은 운영 보안 정책 관점에서 위험합니다.

### P1 (단기 개선)
1. **민감 API 인증 미적용**
   - 라이선스/파서/로그 조회 등 운영성 API에 공통 인증 미들웨어 부재.
2. **파이프라인 상태 저장소 내구성 부족**
   - in-memory dict로 상태를 관리해 멀티 워커/재기동 시 일관성 저하.
3. **에러 응답 규격 일관성 부족**
   - 일부 API는 예외 시 HTTPException, 일부는 정상 200 + 메시지 반환.

### P2 (중기 개선)
1. **테스트 자동화 범위 확대 필요**
   - 백엔드 API/파이프라인 단위 테스트, 프론트 컴포넌트 테스트 체계화 권장.
2. **관측성(Observability) 강화 필요**
   - 구조화 로그(JSON), 추적 ID(correlation ID), 메트릭 수집 도입 권장.

## 4) 이번 반영 사항
1. **라이선스 API 라우터 등록 누락 보완**
   - 백엔드 앱 초기화 시 `license` 라우터를 등록해 `/api/license` 경로가 실제로 동작하도록 연결했습니다.
2. **프론트 lint 오류 정리**
   - 사용하지 않는 `catch` 매개변수들을 제거해 ESLint `no-unused-vars` 오류를 해소했습니다.

## 5) 추천 개선 로드맵

### Sprint 1 (보안/안정화)
- 관리자 인증을 JWT 기반 서버 인증으로 변경.
- 비밀정보를 `.env` + Docker secrets로 분리.
- CORS를 허용 도메인 화이트리스트 기반으로 제한.
- 라이선스/시스템 API에 인증 의무화.

### Sprint 2 (운영 내구성)
- 파이프라인 상태를 Redis/Postgres로 외부화.
- 상태 전이(state machine) 규약 명문화 및 실패 재시도 정책 추가.
- API 에러 스키마 표준화.

### Sprint 3 (품질 체계)
- 백엔드: `pytest` API 테스트 + 파이프라인 유닛 테스트.
- 프론트: 컴포넌트 테스트(Vitest/RTL).
- CI: lint + test + build 파이프라인 의무화.

## 6) 결론
- 현재 프로젝트는 기능 실험과 데모에 적합한 구성을 이미 갖추고 있으며, 아키텍처 확장성도 좋습니다.
- 운영 배포를 목표로 한다면 **보안(인증/비밀정보/CORS)** 과 **상태 내구성(파이프라인 상태 외부화)** 을 최우선으로 보강하는 것이 좋습니다.